<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New Order ‚Äì Anthapuram & Co</title>

<!-- New UI stylesheet -->
<link rel="stylesheet" href="style-dashboard.css">

<!-- Your old style (optional, if needed) -->
<link rel="stylesheet" href="style.css">

<style>
  /* Light fix for your product rows */
  .product-row { 
    display:flex; 
    gap:15px; 
    margin-bottom:12px; 
    align-items:center;
  }
  .product-name { 
    width:200px; 
    font-weight:600; 
    color:#0b74ff;
  }
  .product-row input {
    padding:6px;
    border-radius:8px;
    border:1px solid #d0e2ff;
    width:80px;
  }

  /* Form container */
  .form-card{
    background:white;
    padding:20px;
    border-radius:14px;
    box-shadow:0 8px 24px rgba(11,116,255,0.06);
  }

  .form-card input, select{
    width:100%;
    padding:10px;
    border-radius:10px;
    border:1px solid #d0e2ff;
    margin-bottom:15px;
  }

  button{
    background:#0b74ff;
    color:white;
    border:none;
    padding:12px 18px;
    border-radius:10px;
    font-size:15px;
    cursor:pointer;
    font-weight:600;
  }
</style>

</head>

<body>

<div class="app">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="brand">
      <div class="logo">A</div>
      <div>
        <h3>Anthapuram & Co</h3>
        <div style="font-size:12px;color:var(--muted)">Girls Squad</div>
      </div>
    </div>

    <nav class="nav">
      <a href="index.html"><span class="icon">üè†</span> Home</a>
      <a href="order-log.html" class="active"><span class="icon">üìù</span> New Order</a>
      <a href="order-view.html"><span class="icon">üì¶</span> Order View</a>
      <a href="inventory.html"><span class="icon">üß∞</span> Inventory</a>
      <a href="load-entry.html"><span class="icon">‚¨ÜÔ∏è</span> Load Entry</a>
      <a href="load-log.html"><span class="icon">üìã</span> Load Log</a>
      <a href="team.html"><span class="icon">üëØ‚Äç‚ôÄÔ∏è</span> Team</a>
    </nav>

    <div class="bottom">
      <a href="#" style="text-decoration:none;color:var(--muted);padding:8px;border-radius:8px;">‚öôÔ∏è Settings</a>
      <a href="#" style="text-decoration:none;color:var(--muted);padding:8px;border-radius:8px;">üö™ Logout</a>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">

    <!-- HEADER -->
    <div class="header">
      <div class="title">Create New Order</div>
    </div>

    <div class="container">

      <!-- Your Original Order Form (unchanged) -->
      <div class="form-card">

        <form id="orderForm">

          <input type="text" name="orderId" id="orderId" placeholder="Order ID" readonly>
          <input type="text" name="customerName" placeholder="Customer Name" required>

          <button type="button" id="resetOrderIdBtn" 
              class="btn ghost" 
              style="background:#eef4ff;color:#0b74ff;margin-bottom:20px;">
            Reset Order ID
          </button>

          <h3 style="margin-top:10px;color:#0b74ff;">Products</h3>

          <div id="productContainer">

            <div class="product-row">
              <span class="product-name">Store Kit</span>
              <input type="number" class="productQty" placeholder="Qty" min="0">
            </div>

            <div class="product-row">
              <span class="product-name">MLO Ammunation Kit</span>
              <input type="number" class="productQty" placeholder="Qty" min="0">
            </div>

            <div class="product-row">
              <span class="product-name">Normal Ammunation Kit</span>
              <input type="number" class="productQty" placeholder="Qty" min="0">
            </div>

            <div class="product-row">
              <span class="product-name">ATM Kit</span>
              <input type="number" class="productQty" placeholder="Qty" min="0">
            </div>

            <div class="product-row">
              <span class="product-name">Fleeca Kit</span>
              <input type="number" class="productQty" placeholder="Qty" min="0">
            </div>

          </div>

          <button type="submit" class="btn primary" style="margin-top:20px;">Submit Order</button>

        </form>

      </div>
    </div>

  </main>

</div>


<!-- FIREBASE + APP.JS (Keep as is) -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="app.js"></script>


<!-- Your Original JS (Order Logic) -->
<script>
/* ------------------------------
   ORDER SUBMIT HANDLER
-------------------------------*/
document.getElementById('orderForm').addEventListener('submit', function(e){
  e.preventDefault();

  const orderId = this.orderId.value;
  const customerName = this.customerName.value;

  const productQtys = Array.from(document.querySelectorAll('.productQty')).map(q => q.value || 0);

  const qtyObject = {
    "Store Kit": Number(productQtys[0]) || 0,
    "MLO Ammunation Kit": Number(productQtys[1]) || 0,
    "Normal Ammunation Kit": Number(productQtys[2]) || 0,
    "ATM Kit": Number(productQtys[3]) || 0,
    "Fleeca Kit": Number(productQtys[4]) || 0
  };

  const productList = Object.keys(qtyObject).filter(key => qtyObject[key] > 0);

  if (productList.length === 0) {
    alert("Enter quantity for at least one product.");
    return;
  }

  const orderData = {
      orderId,
      customerName,
      products: productList.join(", "),
      quantities: qtyObject,
      status: "Pending"
  };

  sendToGoogleForm(orderData);
  addOrder(orderData);

  this.reset();
  document.getElementById('orderId').value = generateOrderID();
});

/* ------------------------------
   ORDER ID GENERATOR
-------------------------------*/
function generateOrderID() {
    let lastId = localStorage.getItem("lastOrderId");
    if (!lastId) lastId = 0;
    let newId = parseInt(lastId) + 1;
    localStorage.setItem("lastOrderId", newId);
    return "ANT-" + String(newId).padStart(3, '0');
}
document.getElementById('orderId').value = generateOrderID();

/* ------------------------------
   RESET ORDER ID
-------------------------------*/
document.getElementById('resetOrderIdBtn').addEventListener('click', function() {
    if (confirm("Reset Order ID to ANT-001?")) {
        localStorage.setItem("lastOrderId", 0);
        document.getElementById('orderId').value = generateOrderID();
        alert("Order ID has been reset!");
    }
});

/* ------------------------------
   SEND TO GOOGLE FORM
-------------------------------*/
function sendToGoogleForm(order) {

    const formURL =
      "https://docs.google.com/forms/d/e/1FAIpQLSerqyUjumV_Ktcmc3doZ0iicyRABTK5trXYax7Q0xcNQbWmiw/formResponse";

    const formData = new FormData();

    formData.append("entry.1776514616", order.orderId);
    formData.append("entry.1480204065", order.customerName);
    formData.append("entry.1380732386", order.quantities["Store Kit"]);
    formData.append("entry.877404704", order.quantities["MLO Ammunation Kit"]);
    formData.append("entry.322355721", order.quantities["Normal Ammunation Kit"]);
    formData.append("entry.588722064", order.quantities["ATM Kit"]);
    formData.append("entry.102801523", order.quantities["Fleeca Kit"]);

    formData.append("entry.386545125", "Pending");

    fetch(formURL, {
        method: "POST",
        mode: "no-cors",
        body: formData
    });
}
</script>

</body>
</html>
